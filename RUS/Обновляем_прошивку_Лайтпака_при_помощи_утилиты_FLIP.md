# Обновляем прошивку Лайтпака при помощи утилиты Atmel FLIP
_Пошаговая инструкция. Версию прошивки вашего Лайтпака можно увидеть в Призматике на странице "О программе"_

---

Для перепрошивки помимо самого устройства вам потребуется: 

* Фирменная утилита [FLIP](https://www.microchip.com/DevelopmentTools/ProductDetails/PartNO/FLIP) для микроконтроллеров фирмы Atmel
* Свежая версия прошивки Лайтпака (файл с расширением .hex)

## Прошивка
Для прошивки из ОС Windows или Linux необходимо проделать следующие действия:

1. Скачайте [свежую версию FLIP](https://www.microchip.com/DevelopmentTools/ProductDetails/PartNO/FLIP) с сайта производителя и установите её
2. Подключите Лайтпак к USB и один раз тонким предметом нажмите **потайную кнопку** (отвертсие на передней панели Лайтпака со стороны гнезда USB). Вы услышите звук повторного определния устройства в ОС. Вместо **Lightpack** оно будет называться в диспетчере устройств **AT90USB162 DFU**
3. Установите драйвер для этого нового устройства из папки ```/Atmel/Flip/usb```
4. Запустите FLIP. Интерфейс программы разбит на 3 блока (рис. ниже). Все они имеют подписи
5. Откройте пункт меню **Device→Select** . Выберите из списка микроконтроллер **AT90USB162**
6. Откройте пункт меню **Settings→Communication→USB** . В открывшемся диалоговом окне нажимаем кнопку **Open**. После того, как связь будет установлена левая часть интерфейса (блок Operations Flow) должна стать активной
7. Откройте пункт меню **File→Load HEX File** . Укажите путь (он не должен содержать только латиницу) к файлу прошивки с расширением **.hex** . После этого в центральной части (FLASH Buffer Information) появится информация о ней
8. Убедитесь, что галки **Erase, Program** и **Verify** установлены и нажмите кнопку **Run**
9. После того, как прошивка будет загружена в микроконтроллер (это произойдёт крайне быстро), нужно будет нажать кнопку **Start Application** или просто отключить Лайтпак от USB и подключить заново.

![Atmel FLIP](https://raw.githubusercontent.com/Atarity/Lightpack-docs/master/EN/img/flip3.png)
